(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9426],{36433:function(e,t,s){"use strict";s.d(t,{Z:function(){return T}});var i=s(62272),a=s(84814),r=s(29726),o=s(11163),l=s(90512),n=s(14418),u=s(91669),c=s(97822),d=s(23100),p=s(31224),h=s(65393),m=s(35532),v=s(65313),g=s(29844),P=s(91647),y=s(16666),f=s(1526),x=s(32277),N=s.n(x),_=s(25007);var w=e=>{let{variant:t="default",data:s,className:r,fetchMore:x,hasMore:w,headText:b,isHeaderPageHeader:j,isLoading:M,isWithWrapper:T=!0,cmpName:R,cmpType:C,isPushShallow:E}=e;const I=(0,o.useRouter)(),S=(0,g.Uw)(I.query.page),Z=(0,g.CU)(I.asPath),F=(0,g.ho)(I.asPath),G="default"===t,O=(0,i.jsxs)(i.Fragment,{children:[G?(0,i.jsxs)("div",{className:N().title,children:[(0,i.jsx)(v.K7,{className:N().logoIcon,fill:P.DM.primary}),(0,i.jsx)(n.X,{as:j?"h1":"h2",variant:"h3",textTransform:"uppercase",children:b}),(0,i.jsx)("span",{className:N().label,children:S>1&&(0,i.jsxs)("span",{children:["Page ",S]})})]}):(0,i.jsx)(_.Z,{as:"h4",variant:"postWidget",title:"All Posts",mb:6}),(0,i.jsx)(u.g,{className:N().posts,gap:G?"initial":6,children:null==s?void 0:s.items.map(((e,r)=>{var o,n,u;const d=e,{src:p,alt:m}=(0,f.Oe)(e,"headerImage");return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(h._,{variant:t,post:d,className:(0,l.Z)(N().detailedStory,"detailedStory"),contributors:null==d||null===(o=d.contributorCollection)||void 0===o?void 0:o.items,city:"city"in d?null===(n=d.city)||void 0===n?void 0:n.abbreviation:"",date:(0,y.P)(d),id:d.sys.id,imageProps:{alt:m||(0,g.GH)(null==d?void 0:d.__typename,null==d?void 0:d.title),layout:"responsive",sizes:"(min-width: 600px) 292px, calc(100vw - 32px)",src:p},path:null==d?void 0:d.canonicalPath,preview:(null==d?void 0:d.preview)||"",rating:"rating"in d&&0!==(null==d?void 0:d.rating)?null==d?void 0:d.rating:null,slug:null==d||null===(u=d.slug)||void 0===u?void 0:u.name,title:null==d?void 0:d.title,type:(0,g.z_)(null==d?void 0:d.__typename),itemPosition:r+1,cmpName:G?R:"All Posts",cmpType:C,mt:"0px !important"}),G||s.items.length===r+1?null:(0,i.jsx)(c.i,{m:"0px !important",borderColor:"gray10"})]},d.sys.id)}))}),(0,i.jsxs)(d.xu,{textAlign:G?"center":"left",children:[F&&!E&&(0,i.jsx)(m.Z,{variant:"secondary",className:N().loadMoreButton,href:F,children:"Previous page"}),w&&(0,i.jsx)(m.Z,{href:Z,className:N().loadMoreButton,onClick:e=>{e.preventDefault(),M||x()},children:M?"Loading...":"Load more"})]})]});return T?(0,i.jsx)("section",{className:N().mostRecent,children:(0,i.jsx)(p.yl,{...p.L2,className:(0,l.Z)(N().wrapper,r),children:(0,i.jsx)(p.P4,{colSpan:{base:6,md:12,lg:9},children:O})})}):(0,i.jsx)("div",{className:r,children:O})},b=s(96904),j=s(81956),M=s(30923);var T=e=>{var t;const{variant:s="default",query:l,pageNumber:n,className:u,title:c,isTitlePageHeader:d,isWithWrapper:p=!0,hasMostPopular:h,cityName:m,isPushShallow:v}=e,y=(0,o.useRouter)(),f=(0,M.Z)(),[x,N]=(0,a.useState)(Boolean(y.query.sectionName)||n>1);(0,a.useEffect)((()=>{const e=function(){N(!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);const _="SECTION"===l.type||"CITY"===l.type?(0,b.Kl)({sectionIds:"SECTION"===l.type?l.sectionIds:void 0,options:{enabled:x},startPageZeroIndexed:n?n-1:0,..."CITY"===l.type&&{cityTypes:l.cityTypes,postType:l.postType}}):(0,b.hv)(l.contributorSlug,{enabled:x},n?n-1:0),{data:T,fetchNextPage:R,isFetchingNextPage:C,hasNextPage:E}=(0,r.N)(_),I=(0,a.useCallback)((()=>{var e;R();(null==y||null===(e=y.query)||void 0===e?void 0:e.page)&&(v?y.push({query:{...y.query,page:n+1}},void 0,{shallow:!0}):y.replace({query:{...y.query,page:n+1}})),f("More Results Requested",null,{cmpName:Z,cmpType:"Post Feed"})}),[R,y.pathname,f,n]),S=(0,a.useMemo)((()=>{var e;const t=null==T||null===(e=T.pages)||void 0===e?void 0:e.reduce((0,b.js)("items"));return t&&"items"in t?{...t,items:t.items?t.items.reduce(((e,t)=>t?[...e,(0,j.J8)(t)]:e),[]):[],hits:{hits:[],total:{value:0}}}:{...t,items:[],hits:{hits:[],total:{value:0}}}}),[T]),Z=(0,a.useMemo)((()=>{switch(y.pathname){case P.jN.SECTION:return y.asPath.includes("guides")?"All Guides":y.asPath.includes("reviews")&&h?"All Reviews":"".concat(m," Reviews");case P.jN.SUBSECTION:return(0,g.cE)(y.asPath)&&!h?c:"All Posts";default:return"All Posts"}}),[y.pathname,y.asPath]);return(null==S||null===(t=S.items)||void 0===t?void 0:t.length)?(0,i.jsx)(w,{variant:s,data:S,className:u,fetchMore:I,isLoading:C,headText:Z||c||"",isHeaderPageHeader:d,hasMore:E,isWithWrapper:p,cmpName:Z||"",cmpType:"Post Feed",isPushShallow:v}):null}},52911:function(e,t,s){"use strict";s.d(t,{Z:function(){return w}});var i=s(62272),a=s(84814),r=s(23100),o=s(91669),l=s(97822),n=s(11163),u=s(65393),c=s(27879),d=s(11970),p=s(91647);var h=e=>{let{guides:t}=e;return 1===t.length?(0,i.jsx)(d.Z,{post:t[0],cmpName:"Most Popular Guides",cmpType:"Most Popular Guides",itemPosition:1,imageProps:{priority:!0,width:213,height:120,layout:"responsive",objectFit:"cover",transformations:{resize:{aspectRatio:"16:9"}},sizes:"".concat(p.$Z.fourColumns,", ").concat(p.vH.fourColumns)}}):(0,i.jsx)(c.Z,{posts:t,hasPriority:!0,cmpName:"Most Popular Guides",cmpType:"Most Popular Guides",swiperOptions:{centeredSlides:!1,grabCursor:!0,slidesPerView:1.25,slidesPerGroup:1,touchEventsTarget:"container",spaceBetween:16},carouselWrapperStyles:{height:360}})},m=s(25007),v=s(29844),g=s(16666),P=s(1526),y=s(75911),f=s(94515),x=s.n(f),N=s(81956);var _=s(33562);var w=e=>{let{variant:t="default",sectionIds:s,title:c,isTitleIsPageTitle:d,...f}=e;const w=(0,n.useRouter)(),{data:b}=(0,y.Mt)({sectionIds:s,count:p.oT}),j=(null==(M=b||null)||null===(T=M.searchPosts)||void 0===T?void 0:T.nodes)?x()(M.searchPosts.nodes.map((e=>(0,N.Y9)(e)))):[];var M,T;const R=(0,_.Z)(p.RJ),C="default"===t;if(0===j.length)return null;const E=(0,v.cE)(w.asPath)?"guides":"";return(0,i.jsxs)(r.xu,{as:"section",mb:C?8:0,...f,children:[C?(0,i.jsx)(m.Z,{as:d?"h1":"h2",variant:"featured",title:"Most Popular ".concat(E),subtitle:c,mb:6}):(0,i.jsx)(m.Z,{as:"h4",variant:"postWidget",title:"Most Popular ".concat(E),mb:6}),R&&C?(0,i.jsx)(h,{guides:j}):(0,i.jsx)(o.g,{align:"stretch",gap:C?"initial":6,children:j.map(((e,s)=>{var r,o;const{src:n,alt:c}=(0,P.Oe)(e,"headerImage");return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(u._,{variant:t,post:e,contributors:null==e||null===(r=e.contributorCollection)||void 0===r?void 0:r.items,date:(0,g.P)(e),id:e.sys.id,imageProps:{alt:c||(0,v.GH)(null==e?void 0:e.__typename,null==e?void 0:e.title),layout:"responsive",sizes:"(min-width: 600px) 292px, calc(100vw - 32px)",src:n,priority:!s},path:null==e?void 0:e.canonicalPath,preview:null==e?void 0:e.preview,slug:null==e||null===(o=e.slug)||void 0===o?void 0:o.name,title:null==e?void 0:e.title,type:(0,v.z_)(null==e?void 0:e.__typename),cmpName:"Most Popular Guides",cmpType:"Most Popular Guides",itemPosition:s+1,mt:"0px !important"},e.sys.id),C||R?null:(0,i.jsx)(l.i,{m:0,borderColor:"gray10"})]},e.sys.id)}))})]})}},16666:function(e,t,s){"use strict";s.d(t,{P:function(){return r}});var i=s(25030),a=s.n(i);const r=e=>{if(!e||!e.publishDate)return null;const t=a()(e.publishDate).format("YYYY-MM-DD");return["2022-01-13","2022-01-14"].includes(t)&&"PostReview"===e.__typename&&!e.rating?null:e.publishDate.split("T")[0]}},32277:function(e){e.exports={mostRecent:"styles_mostRecent___67UK",wrapper:"styles_wrapper__q6EPC",title:"styles_title__HdQu2",logoIcon:"styles_logoIcon__0uMt_",posts:"styles_posts__ovVmm",detailedStory:"styles_detailedStory__kesRJ",loadMoreButton:"styles_loadMoreButton___IN38"}},29726:function(e,t,s){"use strict";s.d(t,{N:function(){return l}});var i=s(72536),a=s(54948),r=class extends i.z{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,a.Gm)()},t)}getOptimisticResult(e){return e.behavior=(0,a.Gm)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,i=super.createResult(e,t),{isFetching:r,isRefetching:o,isError:l,isRefetchError:n}=i,u=s.fetchMeta?.fetchMore?.direction,c=l&&"forward"===u,d=r&&"forward"===u,p=l&&"backward"===u,h=r&&"backward"===u;return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,a.Qy)(t,s.data),hasPreviousPage:(0,a.ZF)(t,s.data),isFetchNextPageError:c,isFetchingNextPage:d,isFetchPreviousPageError:p,isFetchingPreviousPage:h,isRefetchError:n&&!c&&!p,isRefetching:o&&!d&&!h}}},o=s(20364);function l(e,t){return(0,o.r)(e,r,t)}}}]);