(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8255],{15414:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[city]/[sectionName]",function(){return s(29633)}])},66439:function(e,t,s){"use strict";var i=s(84814),n=s(14413),o=s(89782),a=s(69650),l=s(30923);t.Z=()=>{var e;const{user:t,logout:s}=(0,n.aF)(),{details:r}=t,c=(0,l.Z)(),d=null==r?void 0:r.uid,{bookmarkState:u,setBookmarkLists:p}=(0,o.a)();(0,i.useEffect)((()=>{var e;d&&!(null===(e=u.userBookmarkLists)||void 0===e?void 0:e.userId)&&t.loggedIn&&(0,a.U)(d,p,s,c)}),[d,null===(e=u.userBookmarkLists)||void 0===e?void 0:e.userId,t.loggedIn])}},29633:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return X},default:function(){return J}});var i=s(62272),n=s(9008),o=s.n(n),a=s(11163),l=s(31224),r=s(36554),c=s(17371),d=s(54111),u=s(36433),p=s(52911),m=s(90512),v=s(25030),_=s.n(v),g=s(25007),h=s(41664),y=s.n(h),x=s(85931),f=s(204),j=s(14418),N=s(34155),T=s(95864),b=s(68526),w=s(68295),P=s(29844),k=s(42561),R=s(30923),Z=s(39207),I=s(56996),S=s.n(I);var C=e=>{let{post:t,className:s,image:n,path:o,rating:a,slug:l,title:r,type:c,itemPosition:d}=e;var u;const{setUserEngagement:p}=(0,Z.f)(),v=(0,R.Z)(),_="PostReview"===t.__typename;return(0,i.jsxs)(x.f,{className:(0,m.Z)(S().story,s),children:[(0,i.jsx)("div",{className:S().background,children:(0,i.jsx)(N.Z,{...n,alt:null==n?void 0:n.alt,className:S().image})}),(0,i.jsxs)("div",{className:S().content,"data-testid":"postPreview-card",children:[a?(0,i.jsx)(b.Z,{className:S().rating,rating:a}):null,(0,i.jsxs)("div",{className:S().body,children:[(0,i.jsxs)(f.k,{mb:2,gap:2,children:[(0,i.jsx)(y(),{href:(0,P.DG)("Review",l,o),legacyBehavior:!0,passHref:!0,children:(0,i.jsx)(x.A,{className:S().link,onClick:()=>{p("post_discovery"),v("Post Clicked",t,{itemPosition:d,cmpName:"Top Rated Spots",cmpType:"Top Rated Spots"})},"data-testid":"postPreview-story",children:(0,i.jsx)(j.X,{as:"h3",variant:"h3",children:r})})}),(null==t||null===(u=t.sys)||void 0===u?void 0:u.id)&&(0,k.C)(c)&&(0,i.jsx)(T.Z,{post:t,cmpName:"Top Rated Spots",cmpType:"Top Rated Spots",itemPosition:d,zIndex:1,fill:"white",h:"fit-content"})]}),(0,i.jsx)(w.$G,{post:t,cityPath:o,cmpName:"Top Rated Spots",cmpType:"Top Rated Spots",cuisine:_?(0,P.V4)(t):void 0,neighborhood:_?(0,P._D)(t):void 0,itemPosition:d,variant:"topSpot"})]})]})]})},E=s(1526),G=s(81956),z=s(91647),B=s(33562),V=s(75911),q=s(68753),H=s.n(q);function Y(e){return Boolean(e.showReviewsHeader)}var F=e=>{var t;const{className:s,sectionId:n}=e,o=(0,B.Z)(z.RJ),{data:a}=(0,V.jn)({sectionIds:[n],first:z.ZE}),l=null==a||null===(t=a.searchPosts)||void 0===t?void 0:t.nodes;return(0,i.jsxs)("section",{className:(0,m.Z)(H().sectionWrapper,s),children:[Y(e)?(0,i.jsx)(g.Z,{as:"h1",subtitle:"".concat(e.cityName," Reviews"),title:"Top Rated Spots"}):(0,i.jsx)(g.Z,{variant:"featured",title:"Top rated spots"}),(0,i.jsx)("div",{className:(0,m.Z)(H().gridView,s),children:null==l?void 0:l.map(((e,t)=>{var s,n,a,r,c;return"PostReview"!==(null==e?void 0:e.__typename)?null:(0,i.jsx)(C,{post:(0,G.J8)(e),image:{alt:(0,P.GH)("PostReview",e.documentTitleText),transformations:{resize:{aspectRatio:o?"16:9":"3:4"},gravity:"auto:subject"},layout:"fill",objectFit:"cover",sizes:"(min-width: 600px) calc(min(100vw, 1280px) / ".concat(null==l?void 0:l.length,"), 100vw"),src:(0,E.Q4)(null===(n=e.postImage)||void 0===n||null===(s=n.cloudinary)||void 0===s?void 0:s.imageIdentifier),priority:0===t},date:_()(null!==(a=e.publishedTimestamp)&&void 0!==a?a:e.updateTimestamp).format("MMMM D, YYYY"),rating:e.placeRatingNumber,contributor:e.contributors,cuisines:null!==(r=e.cuisines)&&void 0!==r?r:[],neighborhoods:null!==(c=e.neighborhoods)&&void 0!==c?c:[],slug:e.slugName,path:e.canonicalPathText,title:e.documentTitleText,type:"Review",itemPosition:t+1},e.documentIdentifier)}))})]})},M=s(49827),O=s(10561),W=s(6372),D=s(90569),L=s.n(D),U=s(66439);var X=!0,J=(0,W.Z)()((e=>{let{hasTopRated:t,hasPopularGuides:s,cityName:n=""}=e;var m,v,_;const g=(0,a.useRouter)(),h=(0,P.zz)(g.query.city),y=(0,P.zz)(g.query.sectionName),x="/".concat(h,"/").concat(y),{data:f,loading:j,error:N}=(0,O.I5G)({variables:{section:x}}),T=(0,P.Uw)(g.query.page),b=1===T,w=(0,P.PJ)(g.asPath);if((0,U.Z)(),j)return(0,i.jsx)(d.Z,{});if(N)return(0,i.jsx)(r.default,{statusCode:500});const k=null==f||null===(v=f.sectionCollection)||void 0===v||null===(m=v.items)||void 0===m?void 0:m[0];if(!(null==k?void 0:k.hasIndex))return(0,i.jsx)(r.default,{statusCode:404});const R=null==k||null===(_=k.curationCollection)||void 0===_?void 0:_.items.filter((e=>"CurateSectionInline"===(null==e?void 0:e.__typename))),Z="all"===h?"Find the best restaurants around the world.":"Find the best restaurants in ".concat(n,".");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[b&&(0,i.jsx)("meta",{name:"description",content:Z},"description"),b&&(0,i.jsx)("meta",{property:"og:description",content:Z}),(0,i.jsx)("link",{rel:"canonical",href:w})]}),(0,i.jsx)(M.ZP,{pageHasPost:!1,post:void 0}),b&&(0,i.jsxs)(l.W2,{className:L().page,children:[t&&(0,i.jsx)(F,{cityName:n,showReviewsHeader:!0,sectionId:k.sys.id}),s&&(0,i.jsx)(l.yl,{children:(0,i.jsx)(l.P4,{colSpan:{base:6,md:12,lg:9},children:(0,i.jsx)(p.Z,{title:"".concat(n," Guides"),isTitleIsPageTitle:!0,sectionIds:[k.sys.id]})})}),(0,i.jsx)(c.Z,{curatedSections:R})]}),(0,i.jsx)(u.Z,{title:"guides"===y?"".concat(n," Guides"):void 0,isTitlePageHeader:"guides"===y,query:{type:"SECTION",sectionIds:[k.sys.id]},className:L().mostRecent,pageNumber:T,hasMostPopular:t,cityName:n})]})}))},56996:function(e){e.exports={story:"styles_story__Gnnsf",background:"styles_background__7yL5Z",link:"styles_link__6WUgs",content:"styles_content__V5stq",rating:"styles_rating__Te3mh",body:"styles_body__TnmC7",title:"styles_title__vjyqV",tags:"styles_tags__XYalC",tag:"styles_tag__bbgg6"}},68753:function(e){e.exports={sectionWrapper:"styles_sectionWrapper__eBA9t",headerText:"styles_headerText__3lBOe",gridView:"styles_gridView__DYlOj"}},90569:function(e){e.exports={page:"styles_page__V99ch"}}},function(e){e.O(0,[9430,3818,7371,9426,2888,9774,179],(function(){return t=15414,e(e.s=t);var t}));var t=e.O();_N_E=t}]);