"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9252],{19252:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var o=t(62272),i=t(84814),l=t(4298),a=t.n(l);var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let d;const u=new Uint8Array(16);function s(){if(!d&&(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(u)}const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function v(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]}var g=function(e,n,t){if(r.randomUUID&&!n&&!e)return r.randomUUID();const o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=o[e];return n}return v(o)},f=t(45814),m=t(29844),y=t(91647),w=t(14413),p=t(3912),h=t(58880),_=t(82947),I=t(11752),C=t.n(I),A=t(11163),P=t(30923),E=t(12433),S=t(34112),b=t(1568),T=t(6832),L=t(69650),N=t(89782),U=t(803),G=t(55537),k=t(95145),O=t(70981),R=t(89066);const{publicRuntimeConfig:D}=C()(),x="Google One Tap";var V=()=>{const e=(0,A.useRouter)(),[n,t]=(0,i.useState)(!1),o=(0,i.useRef)(!1),{ui:l}=(0,p.J)(),{isAuthReady:a,isGoogleClientReady:r}=l,{user:d,login:u,closeModal:s,openModal:c,setUserLoading:v,updateAuthProvider:g,setSecureUserDisplayName:f,setIsLinkedToChase:y}=(0,w.aF)(),{setBookmarkLists:h}=(0,N.a)(),{analyticsMeta:_}=(0,S.e)(),{city:I}=(0,k.j)(),C=(0,T.SS)(),{handleAuthError:V}=(0,R.ZP)(R.Vo.GoogleOneTap),j="Chrome"===(0,m.g_)(),F=(0,P.Z)();m.jU&&!window.__G_ID_OPTIONS__&&(window.__G_ID_OPTIONS__={client_id:D.GOOGLE_CLIENT_ID});const M=async e=>{var n;v(!0);const t=null==e?void 0:e.credential;var o,i,l;const a={cityIdentifier:null!==(o=null==I||null===(n=I.sys)||void 0===n?void 0:n.id)&&void 0!==o?o:"",cityName:null!==(i=null==I?void 0:I.displayName)&&void 0!==i?i:"",homeCityCanonicalPathText:null!==(l=null==I?void 0:I.path)&&void 0!==l?l:""},r=await(async(e,n,t)=>{const o=(0,U.$e)(),i={providerName:T.BO.Google,customAttributeList:(0,m.mX)(),...""!==t.homeCityCanonicalPathText?{cityInfo:t}:{},traceId:o},l=await(0,b.r5)(e,o);if(!l.success)return l;const a="true"===l.data.isNewUser,r=await(0,O.E)(n.mutateAsync,{...i});if(!r.success)return r;const{emailAddressIdentifier:d,fullName:u,diningProfileIdentifier:s,analyticsIdentifier:c,legacyProfileIdentifier:v,linkActiveIndicator:g,homeCityCanonicalPathText:f}=(null==r?void 0:r.data.createProfile)||{emailAddressIdentifier:"",fullName:"",diningProfileIdentifier:"",analyticsIdentifier:"",legacyProfileIdentifier:"",linkActiveIndicator:!1,homeCityCanonicalPathText:""};return{success:!0,data:{userDetails:{creationTime:void 0,email:d||"",emailVerified:!0,lastSignInTime:void 0,phoneNumber:null,photoUrl:null,uid:s||"",refreshToken:null,isLoggingOut:!1,legacyId:v,analyticsId:c,homeCity:f},isNewUser:a,fullName:u||"",linkActiveIndicator:g||!1}}})(t,C,a);if(!r.success){const{error:e}=r;return V(e),"1002"===e.errorCode?(c({trigger:void 0,flow:x,screen:"one-tap-error"}),F("Modal Viewed",null,{modalName:"Signin Account Detected",eventLocation:x}),void v(!1)):(c({trigger:void 0,flow:x,screen:"one-tap-error-generic"}),F("Modal Viewed",null,{modalName:"Onetap error",eventLocation:x}),void v(!1))}const{userDetails:d,isNewUser:w,fullName:p,linkActiveIndicator:_}=r.data;if(p&&f(p),g(T.BO.Google),u(d),_&&y(_),await(0,L.U)((null==d?void 0:d.uid)||"",h),await async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var i;null===(i=window.branch)||void 0===i||i.setIdentity(t),o&&await(0,G.z)(o),(0,E.Er)("Account Created");const l=await(0,m.x5)(o);n(e?"Account Signup":"Account Login",null,{authMethod:"Google",eventLocation:x,externalId:l,logged_in:!0})}(w,F,(null==d?void 0:d.uid)||"",(null==d?void 0:d.email)||""),w)return(0,m.$$)(),void setTimeout((()=>{c({trigger:x,flow:x,signUpStep:"newsletter"})}),500);s()},z=()=>{var e,n,t;return null===(t=window)||void 0===t||null===(n=t.google)||void 0===n||null===(e=n.accounts)||void 0===e?void 0:e.id.cancel()};return(0,i.useEffect)((()=>{var e;if(j&&a&&r&&!(null==d||null===(e=d.details)||void 0===e?void 0:e.uid)&&"e2e"!==D.APP_ENV&&_.url){var i,l,u;const e={client_id:D.GOOGLE_CLIENT_ID,cancel_on_tap_outside:!1,callback:M,log_level:"production"===D.APP_ENV?"warn":"debug"};null===(u=window)||void 0===u||null===(l=u.google)||void 0===l||null===(i=l.accounts)||void 0===i||i.id.initialize({use_fedcm_for_prompt:!0,...e}),t(!0)}else n&&(z(),t(!1),o.current=!1)}),[j,a,r,d,e.asPath,_]),(0,i.useEffect)((()=>(e.events.on("routeChangeStart",z),()=>{e.events.off("routeChangeStart",z)})),[e.asPath]),{isActive:n,triggerGoogleOneTapPrompt:()=>{var e,n,t;null===(t=window)||void 0===t||null===(n=t.google)||void 0===n||null===(e=n.accounts)||void 0===e||e.id.prompt((e=>{"display"!==e.getMomentType()||o.current?(0,m.TR)("[Google OT] Modal suppressed, not displayed"):(F("Modal Viewed",null,{eventLocation:x,modalName:x}),o.current=!0)}))}}},j=t(79924);var F=()=>{var e,n;const{user:t,logout:l,setExternalId:r,setIsLinkedToChase:d}=(0,w.aF)(),[u,s]=(0,i.useState)(null),{categories:c}=(0,h.YL)(),{segmentClient:v}=(0,j.wV)(),I=(0,_.t)("Performance"),{setAnonId:C}=(0,w.aF)(),{analyticsMeta:P}=(0,S.e)(),{isActive:E,triggerGoogleOneTapPrompt:b}=V(),T=(0,A.useRouter)(),L=(0,i.useRef)(c);(0,i.useEffect)((()=>{L.current=c}),[c]);const{setIsAuthReady:N,setIsGoogleClientReady:U}=(0,p.J)();return(0,i.useEffect)((()=>{var e,n;I&&(localStorage.ajs_anonymous_id||(window.addEventListener(y.IK,(()=>{const e="anon-".concat(g());localStorage.setItem("ajs_anonymous_id",JSON.stringify(e)),C(localStorage.getItem("ajs_anonymous_id")||"")})),null===(n=window)||void 0===n||null===(e=n.analytics)||void 0===e||e.ready((()=>{var e,n,t;const o=null===(t=window)||void 0===t||null===(n=t.analytics)||void 0===n||null===(e=n.user)||void 0===e?void 0:e.call(n).anonymousId();if(C(o||""),!o)throw new Error("Segment analytics user is undefined on analytics load")}))))}),[I]),(0,i.useEffect)((()=>{(async()=>{var e,n,o,i,a,u,c,g,f,y;let w="";if(null==t||null===(e=t.details)||void 0===e?void 0:e.uid){var p,h;(0,m.ls)(),w=(null==t||null===(p=t.details)||void 0===p?void 0:p.email)?await(0,m.x5)(null==t||null===(h=t.details)||void 0===h?void 0:h.email.toLowerCase()):"",r(w);const e=!!(null==t?void 0:t.isLinkedToChase);d(e)}else{var _;l(),null===(_=window.branch)||void 0===_||_.logout()}var I,A,P,E,S,b,T,U;(N(!0),(null==t||null===(n=t.details)||void 0===n?void 0:n.uid)&&navigator)&&(v.identify(null===(I=t.details)||void 0===I?void 0:I.analyticsId,{email:null!==(T=null===(A=t.details)||void 0===A?void 0:A.email)&&void 0!==T?T:"",externalId:w},{context:{consent:{categoryPreferences:L.current}}}),(null==t||null===(P=t.details)||void 0===P?void 0:P.email)&&await(0,G.z)(null==t||null===(E=t.details)||void 0===E?void 0:E.email),null===(b=window.branch)||void 0===b||b.setIdentity(null!==(U=null===(S=t.details)||void 0===S?void 0:S.analyticsId)&&void 0!==U?U:void 0));const k=null===(a=window)||void 0===a||null===(i=a.analytics)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.call(i).anonymousId();var O;C(k||""),null===(c=(g=window).hj)||void 0===c||c.call(g,"identify",null!==(O=null==t||null===(u=t.details)||void 0===u?void 0:u.uid)&&void 0!==O?O:null,{segment_anonymous_id:k}),window.__INFATUATION_PARSELY_FLAG_IS_LOGGED_IN=!!(null==t||null===(f=t.details)||void 0===f?void 0:f.uid),s(!!(null==t||null===(y=t.details)||void 0===y?void 0:y.uid))})()}),[null==t||null===(e=t.details)||void 0===e?void 0:e.uid]),(0,i.useEffect)((()=>{var e;(null===(e=window.PARSELY)||void 0===e?void 0:e.updateDefaults)&&null!==u&&window.PARSELY.updateDefaults({data:{logged_in:u}})}),[null===(n=window.PARSELY)||void 0===n?void 0:n.updateDefaults,u]),(0,i.useEffect)((()=>{const e=setTimeout((()=>(E&&b(),null)),5e3);return T.events.on("routeChangeStart",(()=>clearTimeout(e))),()=>{clearTimeout(e),T.events.off("routeChangeStart",(()=>clearTimeout(e)))}}),[E,T.asPath,P]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a(),{src:"https://accounts.google.com/gsi/client",async:!0,onLoad:()=>U(!0)}),(0,o.jsx)(f.Qb,{})]})}},89066:function(e,n,t){t.d(n,{NI:function(){return i},Vo:function(){return o}});var o,i,l=t(84814),a=t(1568),r=t(30923),d=t(29844),u=t(14413);!function(e){e.Signup="Signup",e.Signin="Signin",e.GoogleOneTap="GoogleOneTap",e.Profile="Profile",e.ForgotPassword="ForgotPassword",e.ChangePassword="ChangePassword"}(o||(o={})),function(e){e.Authentication="Authentication",e.ProfileService="Profile Service"}(i||(i={}));n.ZP=e=>{const n=(0,r.Z)(),{setUserLoading:t,setAuthError:o,user:i}=(0,u.aF)(),{authError:s}=i,c=(0,l.useCallback)((function(l){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Authentication";const{errorCode:u,errorDescription:s}=l,c=(0,a.T3)(u,s);return n("Error Viewed",null,{logged_in:i.loggedIn||!1,error_message:c,error_type:r}),(0,d.TR)("[".concat(e,"] errorCode=").concat(u," errorDescription=").concat(null!=s?s:""," errorMessage=").concat(c)),t(!1),o(c),{errorCode:u,errorMessage:c}}),[n,e,t,o,i.loggedIn]);return{handleAuthError:c,authError:s,clearAuthError:(0,l.useCallback)((()=>{o(null)}),[o])}}},45814:function(e,n,t){t.d(n,{Ld:function(){return a},Qb:function(){return l},U0:function(){return r},WS:function(){return d}});var o=t(5152),i=t.n(o);const l=i()((async()=>Promise.all([t.e(3905),t.e(7498),t.e(4059)]).then(t.bind(t,74059))),{loadableGenerated:{webpack:()=>[74059]}}),a=i()((async()=>t.e(5484).then(t.bind(t,35484))),{loadableGenerated:{webpack:()=>[35484]}}),r=i()((async()=>Promise.all([t.e(7498),t.e(6239)]).then(t.bind(t,47498))),{loadableGenerated:{webpack:()=>[47498]}}),d=i()((async()=>t.e(3905).then(t.bind(t,63905))),{loadableGenerated:{webpack:()=>[63905]}})},55537:function(e,n,t){t.d(n,{z:function(){return l}});var o=t(29844),i=t(47041);const l=async e=>{try{var n,t,l,a;const r=await(0,o.x5)(e.toLowerCase());null===(t=window)||void 0===t||null===(n=t.appboy)||void 0===n||n.changeUser(r);const d=null===(a=window)||void 0===a||null===(l=a.appboy)||void 0===l?void 0:l.getUser();null==d||d.setEmail(e),null==d||d.addAlias(e,"email");const u=(0,i.getCookie)("_ga");"string"==typeof u&&(null==d||d.setCustomUserAttribute("ga_aid",u));const s=(0,i.getCookie)("ajs_anonymous_id");return"string"==typeof s?null==d||d.setCustomUserAttribute("segment_aid",s):null==d||d.setCustomUserAttribute("segment_aid",String(localStorage.ajs_anonymous_id)),d}catch(e){throw new Error("Braze not initialized")}}},70981:function(e,n,t){t.d(n,{A:function(){return a},E:function(){return l}});var o=t(6832),i=t(82348);const l=async(e,n)=>await(0,i.aF)((async()=>e({input:n}))),a=async(e,n,t)=>await(0,i.aF)((async()=>e.fetchQuery({queryKey:o.vR.getKey({input:n}),queryFn:o.vR.fetcher({input:n},t?{traceId:t}:void 0)})))}}]);