"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7691],{48486:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(62272),o=n(84814),s=n(82635),a=n(29056),r=n(23100),l=n(7754),d=n(84416),c=n(33838);var u,p=()=>(0,i.jsxs)(r.xu,{position:"relative",children:[(0,i.jsx)(d.E,{alt:"Apple Maps",bottom:"5px",crossOrigin:"anonymous",left:"9px",position:"absolute",src:"https://cdn.apple-mapkit.com/mk/5.72.93/images/logos/logo-wordmark-en-US.svg",width:"82px"}),(0,i.jsx)(c.r,{color:"rgba(0,0,0,.7)",fontFamily:'"-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:"9px",fontWeight:500,href:"https://www.apple.com/legal/internet-services/maps/legal-en.html",padding:"0 9px",position:"absolute",rel:"noreferrer",right:"9px",tabIndex:0,target:"_blank",textDecoration:"underline",textShadow:"0 0 1px rgba(255, 255, 255, .85)",bottom:"9px",children:"Legal"})]});const h={open:{y:0},closed:{y:"100%"},dragged:{y:"-100vh"}};var x;const m=null!==(x=null===(u=n.g)||void 0===u?void 0:u.innerHeight)&&void 0!==x?x:700,v=(0,o.forwardRef)(((e,t)=>{const[n,d]=(0,o.useState)(!1),{isVisible:c,headerContent:u,children:x,onTap:v,onDrag:f,isDraggable:b,...g}=e,y=(0,o.useRef)(null),j=(0,o.useRef)(null);return(0,i.jsx)(r.xu,{position:"fixed",bottom:0,left:0,width:"100%",zIndex:"var(--zindex-popper)",...g,children:(0,i.jsxs)(s.M,{exitBeforeEnter:!0,children:[c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.E.div,{exit:{opacity:0},transition:{duration:.5},children:(0,i.jsx)(r.xu,{id:"map-overlay",ref:j,bg:"white",height:"200vh",left:0,pos:"fixed",top:"-100vh",width:"100%",opacity:0,visibility:"hidden"})}),(0,i.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{opacity:{duration:0},ease:"linear"},children:(0,i.jsx)(p,{})})]}),u,c&&(0,i.jsx)(a.E.div,{animate:c?"open":"closed",drag:b?"y":void 0,dragSnapToOrigin:!0,exit:n?"dragged":"closed",initial:"closed",onDrag:(e,t)=>{if(t.offset.y<0&&y.current&&j.current){const e=Math.abs(t.offset.y)/(m-300),n=e>=1?0:1-e;y.current.style.opacity="".concat(n),j.current.style.opacity="".concat(e)}},onDragEnd:(e,t)=>{t.offset.y<-150?(d(!0),null==f||f()):y.current&&j.current&&(y.current.style.transition="opacity .2s ease",y.current.style.opacity="".concat(1),j.current.style.visibility="hidden")},onDragStart:()=>{y.current&&j.current&&(y.current.style.transition="none",j.current.style.visibility="visible")},transition:{ease:"linear"},variants:h,children:(0,i.jsx)(a.E.div,{onTap:e=>{let{target:t}=e;t instanceof HTMLAnchorElement||t instanceof HTMLButtonElement||null==v||v()},children:(0,i.jsxs)(r.xu,{ref:t,backgroundColor:"white",borderTopRadius:8,boxShadow:"0 -5px 10px rgba(0, 0, 0, .1)",borderTop:"1px solid transparent",children:[(0,i.jsx)(l.M,{mt:2,children:b&&(0,i.jsx)(r.xu,{mt:4,width:"40px",height:"4px",backgroundColor:"gray30",borderRadius:4})}),(0,i.jsx)(r.xu,{ref:y,style:{touchAction:"none"},children:x}),(0,i.jsx)(r.xu,{width:"100%",height:"100vh",position:"absolute",top:"100%",left:0,bgColor:"white"})]})})},"swipe-card")]})})}));v.displayName="DrawerCard";var f=v},44064:function(e,t,n){var i=n(62272),o=n(84814),s=n(29056),a=n(23100),r=n(88641);const l={type:"spring",stiffness:250,damping:30};t.Z=e=>{let{front:t,back:n,isFlipped:d,minHeight:c}=e;const[u,p]=(0,o.useState)("auto"),h=(0,o.useRef)(null),x=(0,o.useRef)(null),m=new ResizeObserver((e=>{for(const t of e)if(t.contentRect.height>0){const e=d?t.contentRect.height+17:t.contentRect.height;p(e)}}));return(0,o.useEffect)((()=>{if(h.current&&x.current){const e=d?x.current:h.current;m.observe(e)}return()=>{m.disconnect()}}),[h,x,d]),"auto"!==u&&u<=0?null:(0,i.jsxs)(s.E.div,{transition:l,style:{position:"relative",height:u,minHeight:c},children:[(0,i.jsx)(s.E.div,{animate:{rotateY:d?-180:0},transition:l,style:{width:"100%",backfaceVisibility:"hidden",position:"absolute"},children:(0,i.jsx)(a.xu,{ref:h,children:t})}),(0,i.jsx)(s.E.div,{initial:{rotateY:180},animate:{rotateY:d?0:180},transition:l,style:{width:"100%",backfaceVisibility:"hidden",position:"absolute",border:"1px solid",borderColor:r.Z.gray10,borderRadius:1,padding:"0 16px"},children:(0,i.jsx)(a.xu,{ref:x,children:n})})]})}},63520:function(e,t,n){var i=n(62272),o=n(75972),s=n(31963),a=n(39697),r=n(44504),l=n(14418),d=n(97822),c=n(55819),u=n(73793),p=n(36788),h=n(84814),x=n(3912);t.Z=()=>{const{ui:e,setFlippedItem:t}=(0,x.J)(),{flippedItemId:n}=e.flippedItem;return(0,h.useEffect)((()=>{const{body:e}=document,t=window.parent.scrollY+50;return e.classList.add("nonscroll"),()=>{e.classList.remove("nonscroll"),window.parent.scrollTo(0,t)}}),[]),n?(0,i.jsxs)(o.d,{placement:"bottom",isOpen:!!n,onClose:()=>{t({flippedItemId:null})},children:[(0,i.jsx)(s.Z,{}),(0,i.jsxs)(a.s,{borderTopRadius:"5px",sx:{position:"absolute !important"},children:[(0,i.jsxs)(r.x,{m:0,pt:5,pb:0,children:[(0,i.jsx)(l.X,{as:"h4",variant:"h4",fontWeight:"bold",textAlign:"left",children:"YOUR NOTES"}),(0,i.jsx)(d.i,{mt:4})]}),(0,i.jsx)(c.o,{right:3,fontSize:".9rem"}),(0,i.jsx)(u.f,{children:(0,i.jsx)(p.Z,{id:n})})]})]}):null}},36788:function(e,t,n){var i=n(62272),o=n(84814),s=n(204),a=n(14418),r=n(23100),l=n(88911),d=n(29222),c=n(11163),u=n(37469),p=n(58946),h=n(88641),x=n(6615),m=n(88008),v=n(30923),f=n(33562),b=n(31432),g=n(69650),y=n(10561),j=n(91647),w=n(14413),k=n(3912),E=n(89782),I=n(24607);t.Z=e=>{let{id:t}=e;var n,S,R,C,Z;const N=(0,o.useRef)(null),D=(0,v.Z)(),L=(0,c.useRouter)(),O=L.pathname===j.jN.FINDER.toString(),{id:T=""}=L.query,z=(0,b.Z)(),H=(0,f.Z)(j.RJ),{data:_}=(0,y.yDP)({variables:{id:t}}),{user:F}=(0,w.aF)(),M=null===(n=F.details)||void 0===n?void 0:n.uid,{ui:A,setFlippedItem:B}=(0,k.J)(),{flippedItemId:Y,itemPosition:V}=A.flippedItem,X=null==_||null===(R=_.entryCollection)||void 0===R||null===(S=R.items)||void 0===S?void 0:S[0],J=null==X?void 0:X.sys.id,{bookmarkState:P,setBookmarkLists:W}=(0,E.a)(),U=null===(Z=P.userBookmarkLists)||void 0===Z||null===(C=Z.savedBookmarks)||void 0===C?void 0:C.find((e=>(null==e?void 0:e.postEntryId)===J)),{isLoading:G,postNote:q}={isLoading:!!P,postNote:null==U?void 0:U.note},[K,Q]=(0,o.useState)({note:""}),[$,ee]=(0,o.useState)(!1),te=(0,I.H)();(0,o.useEffect)((()=>{X&&D("Modal Viewed",X,{modal_name:"Note",itemPosition:V})}),[X]),(0,o.useEffect)((()=>{Y===t&&Q({note:q||""})}),[Y,q]);const ne=()=>{B({flippedItemId:null})};return Y===t||G?(0,i.jsx)(u.J9,{initialValues:K,enableReinitialize:!0,onSubmit:async e=>{const{note:t}=e;var n;(ee(!1),await(async e=>{try{e!==K.note&&J&&M&&(await te.mutateAsync({bookmarkId:(null==U?void 0:U.bookmarkId)||"",note:e}),await(0,g.U)(M,W))}catch(e){ee(!0)}})(t),$)||(z.create((()=>(0,i.jsx)(m.Z,{children:"Saved"}))),B({flippedItemId:null,itemPosition:0}),(e=>{const{note:t}=e,n=""!==t,i={hasNote:n,is_saved:!0};O||(i.listId=[T]),n&&(i.note=t),D("Content Note Saved",X,i)})(e),null===(n=N.current)||void 0===n||n.resetForm())},validateOnChange:!0,resetErrorOnChange:!0,validateOnBlur:!1,children:e=>{let{values:t,isSubmitting:n,errors:o,handleChange:c}=e;var m;const v=t.note!==K.note,f=!(null===(m=t.note)||void 0===m?void 0:m.trim())&&""!==t.note;return(0,i.jsx)(u.l0,{id:"created-content-form",children:(0,i.jsxs)(s.k,{direction:"column",gap:{base:8,md:4},mt:{md:4},"data-testid":"thumb",children:[(null==X?void 0:X.title)&&(0,i.jsx)(a.X,{variant:"h3",as:"div",children:null==X?void 0:X.title}),(0,i.jsxs)(r.xu,{"data-testid":"note",children:[(0,i.jsxs)(r.xu,{flexGrow:1,flexBasis:0,minWidth:0,children:[(0,i.jsx)(x.Z,{id:"note","data-testid":"note-area",value:null==t?void 0:t.note,placeholder:"What did you think of this spot?  Only you can see your notes.",onChange:c,maxLength:j.DE,variant:H?"outlined":"underlined",minHeight:{base:190,md:"auto"},borderRadius:{base:4,md:0}}),(0,i.jsxs)(l.x,{variant:"caption",textAlign:"end",mt:3,children:[((null==t?void 0:t.note)||"").length,"/",j.DE," ",(0,i.jsx)(r.xu,{as:"span",display:{base:"inline",md:"none"},children:"characters"})]})]}),(0,i.jsx)(p.Z,{name:"note",children:o.note}),(0,i.jsxs)(s.k,{mb:4,mt:{base:4,md:1},children:[!H&&(0,i.jsx)(d.z,{variant:"unstyled",onClick:ne,"data-testid":"cancel-button",children:(0,i.jsx)(a.X,{variant:"h4",as:"span",children:"cancel"})}),(0,i.jsx)(d.z,{variant:H?"primary":"unstyled","data-testid":"save-button",type:"submit",width:{base:"100%",md:"auto"},m:{md:0},p:{md:0},ml:{md:12},color:{base:h.Z.white,md:v?h.Z.primary:h.Z.gray30},isDisabled:n||!v||f,children:(0,i.jsx)(a.X,{variant:"h4",as:"span",children:"Save"})})]})]})]})})}}):null}},7754:function(e,t,n){n.d(t,{M:function(){return a}});var i=n(93701),o=n(35059),s=n(62272),a=(0,i.m)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});a.displayName="Center";var r={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,o.G)((function(e,t){const{axis:n="both",...o}=e;return(0,s.jsx)(i.m.div,{ref:t,__css:r[n],...o,position:"absolute"})}))}}]);