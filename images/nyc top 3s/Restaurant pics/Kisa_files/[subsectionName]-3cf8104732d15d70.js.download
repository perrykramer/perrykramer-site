(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3880],{2609:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[city]/[sectionName]/[subsectionName]",function(){return i(85800)}])},27879:function(e,t,i){"use strict";i.d(t,{p:function(){return f}});var n=i(62272),s=i(84814),o=i(88911),a=i(14418),r=i(23100),l=i(76684),d=i(29222),c=i(90512),u=i(67320),p=i(11970),h=i(91647),m=i(19916),v=i(33562),x=(i(64172),i(29283)),g=i.n(x);const f=(e,t)=>e?t?{width:270,height:202}:{width:213,height:120}:t?{width:379,height:284}:{width:278,height:156};t.Z=e=>{let{posts:t=[],swiperOptions:i,cmpName:x,cmpType:y,title:b,startingItemPosition:j=0,carouselWrapperStyles:k,className:w,slideHeaders:C,isShowPostPreview:_=!0,onPostClick:N,hasPriority:P,setCarouselHeight:I,isOpenInNewTab:T}=e;const Z=(0,v.Z)(h.RJ),[E,R]=(0,s.useState)(0),[S,z]=(0,s.useState)(null);(0,s.useEffect)((()=>{S&&(null==I||I(S.height))}),[null==S?void 0:S.height]),(0,s.useEffect)((()=>{null==S||S.slideTo(0)}),[t]);const L=t.filter(Boolean);return(null==L?void 0:L.length)?(0,n.jsxs)(n.Fragment,{children:[b&&(0,n.jsx)(a.X,{variant:"h2",width:{sm:5/6,md:1/4},textTransform:"uppercase",pb:{base:10,md:2},children:b}),(0,n.jsxs)(r.xu,{...k,children:[!Z&&(0,n.jsxs)(l.K,{direction:"row",justifyContent:"flex-end",mb:8,children:[(0,n.jsx)(d.z,{"aria-label":"Previous slide","data-testid":"carousel-arrow-prev",isDisabled:0===E,variant:"unstyled",lineHeight:1,onClick:()=>null==S?void 0:S.slidePrev(),children:(0,n.jsx)(u.wy,{boxSize:6})}),(0,n.jsx)(d.z,{"aria-label":"Next slide","data-testid":"carousel-arrow-next",isDisabled:E===L.length-1,variant:"unstyled",lineHeight:1,onClick:()=>null==S?void 0:S.slideNext(),children:(0,n.jsx)(u.XC,{boxSize:6})})]}),(0,n.jsx)(m.tq,{onActiveIndexChange:e=>{R(e.activeIndex)},onSwiper:e=>{z(e)},className:(0,c.Z)(g().swiper,w),...i,children:null==L?void 0:L.map(((e,t)=>{var i;const s=t===E,a=!!P&&t<2;return(0,n.jsxs)(m.o5,{className:g().slide,"data-testid":"carousel-slide",children:[(r=t,(null==C?void 0:C[r])&&(0,n.jsx)(o.x,{fontWeight:"bold",pb:4,children:C[r]})),(0,n.jsx)(p.Z,{post:e,cmpName:x,cmpType:y,itemPosition:j+t+1,showPreview:_&&s,openInNewTab:T,imageProps:{...f(Z,s),layout:"responsive",objectFit:"cover",transformations:{resize:{aspectRatio:"16:9"}},sizes:"".concat(h.$Z.fourColumns,", ").concat(h.vH.fourColumns),priority:a},onClick:N})]},null==e||null===(i=e.sys)||void 0===i?void 0:i.id);var r}))})]})]}):null}},30651:function(e,t,i){"use strict";i.d(t,{l:function(){return m}});var n=i(62272),s=i(84814),o=i(20185),a=i(90512),r=i(67320),l=i(62243),d=i.n(l),c=i(91647),u=i(88641),p=i(89782);const h=e=>{let{data:t,onClick:i,userId:o,bookmarkState:l}=e;var p,h,m;const[v,x]=(0,s.useState)(!1),g=null==l||null===(h=l.userBookmarkLists)||void 0===h||null===(p=h.savedBookmarks)||void 0===p?void 0:p.find((e=>(null==e?void 0:e.postEntryId)===t.id));(0,s.useEffect)((()=>{o&&x(!!g)}),[o,l,t]);return(0,n.jsx)("div",{className:d().pinContainer,title:"".concat(t.title),onClick:()=>i(t,v),"data-testid":"map-pinContainer",children:(0,n.jsxs)("div",{className:(0,a.Z)({[d().pinBase]:!0,[d().empty]:!t.rating&&!v,[d().bookmarkEmpty]:!t.rating&&v,[d().bookmark]:t.rating&&v}),children:[(null==t?void 0:t.rating)&&(null==t?void 0:t.rating)>.1?null===(m=t.rating)||void 0===m?void 0:m.toFixed(1):null,v&&(()=>{var e,i,s,o,a,d,p;if(!g)return null;const h=null==l||null===(i=l.userBookmarkLists)||void 0===i||null===(e=i.bookmarkLists)||void 0===e?void 0:e.filter((e=>c.xx.test((null==e?void 0:e.name)||"")||"Want To Go"===(null==e?void 0:e.name))),m="Want To Go"===(null==h||null===(s=h[0])||void 0===s?void 0:s.name),v=null==h||null===(a=h[0])||void 0===a||null===(o=a.bookmarks)||void 0===o?void 0:o.find((e=>(null==e?void 0:e.postEntryId)===t.id)),x=null==h||null===(p=h[1])||void 0===p||null===(d=p.bookmarks)||void 0===d?void 0:d.find((e=>(null==e?void 0:e.postEntryId)===t.id));return v&&!m||x&&m?(0,n.jsx)(r.h_,{size:16,fill:u.Z.pink50}):v&&m||x&&!m?(0,n.jsx)(r.U6,{size:16,fill:u.Z.green50}):(0,n.jsx)(r.pl,{})})()]})})},m=(e,t,i,s,a)=>{const r=[];return e.forEach((e=>{const l={data:{id:e.id,rating:e.rating,title:e.title},accessibilityLabel:e.title,size:{width:48,height:37}},d=new t.Coordinate(e.latitude,e.longitude),c=new t.Annotation(d,(()=>((e,t,i,s)=>{const a=document.createElement("div");return(0,o.createRoot)(a).render((0,n.jsx)(p.Z,{children:(0,n.jsx)(h,{data:e,onClick:t,userId:i,bookmarkState:s})})),a})(e,i,s,a)),l);r.push(c)})),r}},11970:function(e,t,i){"use strict";var n=i(62272),s=i(35059),o=i(85931),a=i(23100),r=i(14418),l=i(41664),d=i.n(l),c=i(34155),u=i(61138),p=i(26555),h=i(68295),m=i(29844),v=i(1526),x=i(91647),g=i(33562),f=i(30923),y=i(71613),b=i(38608),j=i(39207);const k=(0,s.G)(((e,t)=>{var i,s;const{post:l,imageProps:k,cmpName:w,cmpType:C,itemPosition:_,showPreview:N=!0,showRating:P=!0,openInNewTab:I,onClick:T,...Z}=e,{setUserEngagement:E}=(0,j.f)(),R=(0,f.Z)(),S=(0,g.Z)(x.RJ),z=(0,y.Z)("ROLLOUT_WEB_MEDIA_STANDARDIZATION",!1),{src:L,alt:B}=z?(0,v.lR)(l):(0,v.Oe)(l,"headerImage"),F=(0,m.z_)(l.__typename),M="Guide"!==F;return(0,n.jsxs)(o.f,{role:"group",ref:t,"data-testid":"postPreview-story",onClick:e=>{null==T||T(e),E("post_discovery"),R("Post Clicked",l,{itemPosition:null!=_?_:1,cmpName:w,cmpType:C})},display:"flex",flexDirection:"column",gap:"2",...Z,children:[(0,n.jsx)(a.xu,{sx:b.Z.imageContainer,children:(0,n.jsxs)(a.xu,{sx:b.Z.imageWrapper,children:[(0,n.jsx)(c.Z,{src:L,alt:B||(0,m.GH)(l.__typename,l.title),...k}),P&&"rating"in l&&!!l.rating&&(0,n.jsx)(p.iG,{sx:b.Z.rating,"data-testid":"ratingBadge-rating",children:null===(i=l.rating)||void 0===i?void 0:i.toFixed(1)}),(0,n.jsx)(a.xu,{as:"span",sx:b.Z.line})]})}),(0,n.jsx)(a.xu,{sx:b.Z.titleContainer,children:(0,n.jsx)(r.X,{as:"h3",variant:"h3",sx:b.Z.title,children:(0,n.jsx)(d(),{href:(0,m.DG)(F,null===(s=l.slug)||void 0===s?void 0:s.name,l.canonicalPath),passHref:!0,legacyBehavior:!0,children:(0,n.jsx)(o.A,{target:I?"_blank":"_self",children:l.title})})})}),(0,m.lp)(l)&&(0,n.jsx)(h.$G,{post:l,cuisine:M?(0,m.V4)(l):[],neighborhood:(0,m._D)(l),cityPath:l.canonicalPath,cmpName:w,cmpType:C,itemPosition:_||1}),N&&l.preview&&(0,n.jsx)(u.Z,{text:l.preview,noOfLines:S?4:3,variant:"primary"})]})}));t.Z=k},85800:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return U},default:function(){return K}});var n=i(62272),s=i(84814),o=i(41664),a=i.n(o),r=i(9008),l=i.n(r),d=i(11163),c=i(49827),u=i(776),p=i(204),h=i(88911),m=i(14418),v=i(29222),x=i(97822),g=i(23100),f=i(31224),y=i(54111),b=i(36554),j=i(36433),k=i(52911),w=i(76684),C=i(25095),_=i(25007),N=i(1526),P=i(29844),I=i(91647),T=i(75911),Z=i(81956);var E=e=>{let{sectionIds:t}=e;var i;const{data:s}=(0,T.jn)({sectionIds:t,first:I.ZE}),o=null==s||null===(i=s.searchPosts)||void 0===i?void 0:i.nodes;return o?(0,n.jsxs)(g.xu,{mb:0,children:[(0,n.jsx)(_.Z,{as:"h4",variant:"postWidget",title:"Top Rated Spots",mb:6}),(0,n.jsxs)(w.K,{spacing:6,children:[o.map(((e,t)=>{var i,s;if("PostReview"!==(null==e?void 0:e.__typename))return null;const o=(0,N.Q4)(null===(s=e.postImage)||void 0===s||null===(i=s.cloudinary)||void 0===i?void 0:i.imageIdentifier),a=(0,Z.J8)(e);return(0,n.jsx)(C.C,{variant:"updated",post:a,image:{src:o,alt:(0,P.GH)("PostReview",e.documentTitleText)},path:e.canonicalPathText,rating:e.placeRatingNumber,slug:e.slugName,title:e.documentTitleText,type:"Review",itemPosition:t+1,cmpName:"Top Rated Spots",cmpType:"Top Rated Spots",venueName:e.placeName,price:(0,Z.gM)(e.placePriceIndicatorCode)},e.documentIdentifier)})),(0,n.jsx)(x.i,{mb:0})]})]}):null},R=i(93344),S=i(47162),z=i(30651),L=i(31650),B=i(67320),F=i(75396),M=i(23864),A=i(95145),D=i(14413),H=i(89782),G=i(5467);const W=()=>{var e,t;const i=(0,d.useRouter)(),{sectionName:o}=i.query,{cities:r}=(0,F.Z)(),[l,c]=(0,s.useState)(),{mapkit:u}=(0,s.useContext)(S.L),h=(0,s.useRef)(null),[v,x]=(0,s.useState)([]),[f,y]=(0,s.useState)(!1),{data:b,isLoading:j}=(0,L.Yi)(),k=null==b||null===(e=b.searchPosts)||void 0===e?void 0:e.nodes,{finder:w,setInitialValues:C,setSearchTrigger:_}=(0,M.Ri)(),{isInitialized:N}=w,{city:P}=(0,A.j)(),{user:I}=(0,D.aF)(),T=I.loading,E=null==P?void 0:P.path,{bookmarkState:W}=(0,H.a)();(0,s.useEffect)((()=>{if(u&&h.current){const e=new u.Map(h.current);e.showsCompass=u.FeatureVisibility.Hidden,e.showsMapTypeControl=!1,e.showsZoomControl=!1,c(e)}}),[u,h]),(0,s.useEffect)((()=>{if(!N&&r&&P&&u&&l&&(C({queryParams:{canonicalPath:E},city:P,cities:r}),P.bounds)){const e=new u.BoundingRegion(P.bounds.northEast.latitude,P.bounds.northEast.longitude,P.bounds.southWest.latitude,P.bounds.southWest.longitude).toCoordinateRegion();l.setRegionAnimated(e)}}),[N,r,P,u,l]),(0,s.useEffect)((()=>{if(l&&u&&!T){var e;if(l.annotations.length>0&&l.removeAnnotations(v),!k)return;const t=[];k.forEach((e=>{var i,n;e&&"PostReview"===e.__typename&&e.placeLocation&&t.push({id:e.documentIdentifier,title:e.documentTitleText,slug:e.slugName,rating:e.placeRatingNumber,longitude:null===(i=e.placeLocation)||void 0===i?void 0:i.longitudeNumber,latitude:null===(n=e.placeLocation)||void 0===n?void 0:n.latitudeNumber,price:(0,Z._T)(e.placePriceIndicatorCode),post:(0,Z.J8)(e)})}));const i=(0,z.l)(t,u,(()=>null),null==I||null===(e=I.details)||void 0===e?void 0:e.uid,W);x(i),l.addAnnotations(i),l.showItems(l.annotations,{animate:!0,padding:new u.Padding(50)})}}),[k,u,l,T]),(0,s.useEffect)((()=>{var e;if(l&&u&&!T&&(null===(e=W.userBookmarkLists)||void 0===e?void 0:e.savedBookmarks)){var t;if(!k)return;const e=[];k.forEach((t=>{var i,n;t&&"PostReview"===t.__typename&&t.placeLocation&&e.push({id:t.documentIdentifier,title:t.documentTitleText,slug:t.slugName,rating:t.placeRatingNumber,longitude:null===(i=t.placeLocation)||void 0===i?void 0:i.longitudeNumber,latitude:null===(n=t.placeLocation)||void 0===n?void 0:n.latitudeNumber,price:(0,Z._T)(t.placePriceIndicatorCode),post:(0,Z.J8)(t)})}));const i=(0,z.l)(e,u,G.Bi,null==I||null===(t=I.details)||void 0===t?void 0:t.uid,W);x(i),l.annotations.length>0&&l.removeAnnotations(v),l.addAnnotations(i)}}),[null===(t=W.userBookmarkLists)||void 0===t?void 0:t.savedBookmarks]),(0,s.useEffect)((()=>()=>{null==l||l.destroy()}),[]);const O=!l||!u||!N||j;return(0,n.jsx)(a(),{legacyBehavior:!0,href:"/finder",children:(0,n.jsxs)(g.xu,{width:"100%",height:"100%",onClick:()=>{switch(o){case"neighborhoods":_("City Neighborhood Map Clicked");break;case"cuisines":_("City Cuisine Map Clicked");break;case"perfect-for":_("City Perfect For Map Clicked")}},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),cursor:"pointer","data-testid":"next-link",children:[O&&(0,n.jsx)(R.O,{height:"100%",isLoaded:!O,bg:"gray.500",fadeDuration:1}),(0,n.jsx)("div",{style:{width:"100%",height:"100%",pointerEvents:"none",filter:f?"brightness(0.8)":"none"},ref:h}),f&&(0,n.jsxs)(p.k,{position:"absolute",top:"50%",left:"50%",background:"white",color:"primary",px:8,py:4,borderRadius:4,transform:"translateY(-50%) translateX(-50%)",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.10)",alignItems:"center",gap:2,children:[(0,n.jsx)(m.X,{variant:"h4",as:"h4",textTransform:"uppercase",children:"View on Map"}),(0,n.jsx)(B.Zl,{size:6})]})]})})};var O=(0,s.memo)(W),X=i(10561),q=i(33562),J=i(6372),V=i(88641);var U=!0,K=(0,J.Z)()((e=>{let{isFirstPage:t,isShowPopularGuides:i,cityName:o,hasFewPosts:r,l1Sections:w}=e;var C,_,N;const T=(0,d.useRouter)(),{city:Z,sectionName:R,subsectionName:z}=T.query,L=(0,P.Uw)(T.query.page),F=(0,P.zz)(Z),A="/".concat(F,"/").concat((0,P.zz)(R),"/").concat((0,P.zz)(z)),{data:D,loading:H,error:G}=(0,X.I5G)({variables:{section:A}}),{updateFiltersAndTags:W,setSearchTrigger:J}=(0,M.Ri)(),U=(0,q.Z)(I.RJ),K=null==D||null===(C=D.sectionCollection)||void 0===C?void 0:C.items[0],Y=null==K?void 0:K.sys.id;var $;const Q=null!==($=null==w?void 0:w.filter((e=>e.sys.id)).map((e=>e.sys.id)))&&void 0!==$?$:[null==K?void 0:K.sys.id];if((0,s.useEffect)((()=>{if(Y){W({...{neighborhoodIds:"neighborhoods"===R?Q:[],cuisineIds:"cuisines"===R?[Y]:[],categoryIds:"perfect-for"===R?[Y]:[]},rating:null,prices:[],allowsReservations:!1,saved:!1})}}),[Y]),H)return(0,n.jsx)(y.Z,{});if(G)return(0,n.jsx)(b.default,{statusCode:500});if(!(null==K?void 0:K.hasIndex)||!Y)return(0,n.jsx)(b.default,{statusCode:404});const ee=t?((e,t,i,n)=>n||("cuisines"===e?"Find the best ".concat(t," restaurants in ").concat(i,"."):"perfect-for"===e?"Find the best restaurants for ".concat(t," in ").concat(i,"."):"Find the best restaurants in ".concat(t,".")))(R,null==K?void 0:K.displayName,o,null==K?void 0:K.seoMetaDescription):null,te=(0,P.PJ)(T.asPath),ie=null==D||null===(N=D.sectionCollection)||void 0===N||null===(_=N.items[0])||void 0===_?void 0:_.displayName;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[ee&&(0,n.jsx)("meta",{name:"description",content:ee},"description"),ee&&(0,n.jsx)("meta",{property:"og:description",content:ee}),(0,n.jsx)("link",{rel:"canonical",href:"".concat(te),"data-testid":"canonical-link"}),r&&(0,n.jsx)("meta",{name:"robots",content:"noindex"})]}),(0,n.jsxs)(n.Fragment,{children:[Y&&(0,n.jsx)(c.ZP,{post:void 0,pageHasPost:!1}),(0,n.jsxs)(f.W2,{...f.HG,pt:10,pb:12,position:"relative",children:[(0,n.jsx)(u.P,{gridColumn:"1 / span 6",children:(0,n.jsxs)(p.k,{flexDir:"column",gap:6,children:[(0,n.jsxs)("div",{children:[w&&(0,n.jsxs)(h.x,{variant:"caption",color:V.Z.gray100,children:[o," ",w?"Area":(0,P.vq)(R)]}),(0,n.jsx)(m.X,{"data-testid":"subSection-title",textTransform:"capitalize",as:"h1",variant:U?"h1":"h2",children:K.displayName})]}),i&&(0,n.jsxs)(n.Fragment,{children:[w&&(0,n.jsx)(a(),{href:"".concat(A,"/all"),legacyBehavior:!0,children:(0,n.jsx)(v.z,{variant:"unstyled",color:"primary",w:"fit-content",children:(0,n.jsxs)(p.k,{alignItems:"center",gap:2,children:[(0,n.jsxs)("span",{children:["View All ",K.displayName," ",R]}),(0,n.jsx)(B.ol,{})]})})}),(0,n.jsx)(x.i,{mb:0,borderColor:"gray10"}),(0,n.jsx)(k.Z,{variant:"updated",sectionIds:Q}),(0,n.jsx)(E,{sectionIds:Q})]}),(0,n.jsx)(j.Z,{variant:"updated",query:{type:"SECTION",sectionIds:Q},isWithWrapper:!1,title:ie,pageNumber:L,hasMostPopular:i,isPushShallow:!0})]})}),U?(0,n.jsx)(a(),{passHref:!0,legacyBehavior:!0,href:"/finder",children:(0,n.jsx)(v.z,{w:"fit-content",position:"sticky",zIndex:1,bottom:6,transform:"translateX(-50%)",left:"50%",px:8,rightIcon:(0,n.jsx)(B.Zl,{color:"primary",fontSize:"1.5em"}),variant:"floating",boxShadow:"md",color:"primary",onClick:()=>{switch(R){case"neighborhoods":J("City Neighborhood Map Clicked");break;case"cuisines":J("City Cuisine Map Clicked");break;case"perfect-for":J("City Perfect For Map Clicked")}},children:"View on Map"})}):(0,n.jsx)(u.P,{gridColumn:"7 / span 6",pb:4,children:(0,n.jsx)(S.c,{children:(0,n.jsx)(g.xu,{width:"full",h:"576px",position:"sticky",top:124,borderRadius:16,overflow:"hidden",children:(0,n.jsx)(O,{})})})})]})]})]})}))},29283:function(e){e.exports={swiper:"styles_swiper__Dk89o",slide:"styles_slide__Rl8SZ"}},62243:function(e){e.exports={pinContainer:"styles_pinContainer__R6347",pinBase:"styles_pinBase__2gIDL",empty:"styles_empty__MpFlH",bookmark:"styles_bookmark__tFSMK",bookmarkEmpty:"styles_bookmarkEmpty__7lcXf"}}},function(e){e.O(0,[9430,9426,2888,9774,179],(function(){return t=2609,e(e.s=t);var t}));var t=e.O();_N_E=t}]);